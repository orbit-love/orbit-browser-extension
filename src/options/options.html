<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Orbit Extension Settings</title>
    <link rel="stylesheet" href="./options.css" />
    <script type="module" src="./options.js"></script>
  </head>
  <meta charset="utf-8" />

  <body>
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="mx-auto max-w-3xl sm:mt-10 lg:mt-20">
        <div x-data="orbit">
          <section>
            <div class="py-5">
              <h1
                class="text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl"
              >
                Thanks for installing the Orbit extension ðŸ‘‹
              </h1>
            </div>
            <div class="py-5">
              <p class="text-base text-gray-900">
                The Orbit Chrome extension brings Orbit data right into GitHub,
                allowing you to view a contributor's activity on your repo and
                in general, as well as information like Orbit Level, Reach, and
                Points.
              </p>
              <div
                class="pb-6 aspect-h-4 aspect-w-3 hidden overflow-hidden rounded-lg lg:block"
              >
                <!-- <img src="../images/screenshot.png" alt="Two each of gray, white, and black shirts laying flat." class="h-full w-full object-cover object-center"> -->
              </div>
              <p x-show="!showLogin" x-cloak class="text-base text-gray-900">
                You are signed in to Orbit.
                If you wish you sign out, visit your
                <a href="https://app.orbit.love/user/settings/authorized_applications" rel="noreferrer" target="_blank">User Settings on Orbit</a> & revoke access for the "Orbit Browser Extension" application.
              </p>
              <p x-show="showLogin" x-cloak class="text-base text-gray-900">
                To proceed with the installation, please sign in to Orbit.
              </p>
            </div>
            <div x-show="showLogin" x-cloak class="py-4 flex justify-end">
              <button
                type="button"
                class="inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
                @click="startOAuthFlow"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 20 20"
                  fill="currentColor"
                  class="w-5 h-5"
                >
                  <path
                    fill-rule="evenodd"
                    d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z"
                    clip-rule="evenodd"
                  />
                </svg>

                Next: Sign in to Orbit
              </button>
            </div>
          </section>
          <section
            x-cloak
            x-show="['success', 'warning'].includes(authenticationCheckStatus.status) && workspaces && workspaces.length> 0"
          >
            <div class="py-5">
              <label class="text-base font-semibold text-gray-900"
                >Select a workspace</label
              >
              <p class="text-sm text-gray-500">
                This workspace will be used to retrieve information about community members, and create new ones.
              </p>
              <fieldset class="mt-4">
                <legend class="sr-only">Available workspaces</legend>
                <div class="space-y-4">
                  <template x-for="workspace in workspaces" :key="workspace.id">
                    <div class="flex items-center">
                      <input
                        x-bind:id="workspace.attributes.slug"
                        name="workspace"
                        type="radio"
                        x-bind:value="workspace.attributes.slug"
                        x-model="selectedWorkspaceSlug"
                        class="h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-600"
                      />
                      <label
                        x-bind:for="workspace.attributes.slug"
                        class="ml-3 block text-sm font-medium leading-6 text-gray-900"
                        x-text="workspace.attributes.name"
                        ></label
                      >
                    </div>
                  </template>
                </div>
              </fieldset>
              <div class="py-4 flex justify-end">
                <button
                  type="button"
                  class="inline-flex items-center gap-x-2 rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
                  @click="save"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z"
                      clip-rule="evenodd"
                    />
                  </svg>

                  Save
                </button>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
  </body>
</html>
